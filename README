require 'roger_rabbit'


RogerRabbit.publish "queue-name", :joe => "cool"

RogerRabbit.consume "queue-name" do |msg|
  # msg is { :joe => "cool" }
end

RogerRabbit.rpc_listen("another-queue") do |args|
  args.merge({:true => true})
end
  
# RPC with result directly returned
result = RogerRabbit.rpc_message("another-queue", :joe => "cool")
# result is { :joe => "cool", :true => "true" }


# RPC with result returned in a block
RogerRabbit.rpc_message("another-queue", :joe => "cool") do |result|
  # result is { :joe => "cool", :true => "true" }
end
